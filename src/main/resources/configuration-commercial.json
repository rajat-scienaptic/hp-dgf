{
  "sparkConfig": {
    "master": "local",
    "appName": "hp-retail"
  },
  "sources": {
    "IEC_CLAIMS": {
      "name": "iec_claims",
      "filePath": "/home/avik/Scienaptic/RnD/data/iec_claims.csv",
      "select": {
        "select01": {
          "isUnknown":"n",
          "cols": ["Big Deal ID","Deal Description","Business Model Description","Partner Desc","Partner Ship Calendar Date","Product ID","Claim Quantity","Claim Partner Unit Rebate"]
        }
      },
      "filter": {
        "filter01": {
          "multiWordMap" : { "ptnr_Date": "Partner Ship Calendar Date"},
          "conditionTypes": ["and"],
          "conditions": ["ptnr_Date > 31-Oct-2018"]
        }
      }
    },
    "XS_CLAIMS": {
      "name": "xs_claims",
      "filePath": "/home/avik/Scienaptic/RnD/data/.csv",
      "outFilePath" : "",
      "select": {
        "select01": {
          "isUnknown":"n",
          "cols": ["Deal ID","Deal Description","Business Model Description","Claim Partner Name","Partner Ship Calendar Date","Manufacturing Product Identifier","Claim Quantity","Claim Partner Unit Rebate USD"]
        }
      },
      "join": {
        "join01": {
          "leftTableAlias": "left", "rightTableAlias": "right", "typeOfJoin": ["left","inner"],
          "joinCriteria": {
            "left": ["Big Deal ID","Base SKU"],
            "right": ["C2B Promo Code","SKU"]
          },
          "selectCriteria": {
            "left": [], "right": []
          }
        },
        "join02": {
          "leftTableAlias": "left", "rightTableAlias": "right", "typeOfJoin": ["inner"],
          "joinCriteria": {
            "left": ["Week End Date"],
            "right": ["Week.End.Date"]
          },
          "selectCriteria": {
            "left": [], "right": []
          }
        },
        "join03": {
          "leftTableAlias": "left", "rightTableAlias": "right", "typeOfJoin": ["left","inner"],
          "joinCriteria": {
            "left": ["Base SKU"],
            "right": ["SKU"]
          },
          "selectCriteria": {
            "left": [], "right": ["SKU","Street Price","Consol SKU","Abbreviated Name","Full Name","Platform Name","Brand","IPSLES","HPS/OPS","Series","Category","Category Subgroup","Category.1","Category.2","Category.3","Line","PL","Mono/Color","Category Custom","Need Big Data","Top SKU"]
          }
        }
      },
      "group" : {
        "group01": {
          "cols" : ["Week End Date", "Partner Ship Calendar Date", "Partner Desc", "Big Deal ID", "Base SKU", "Claim Partner Unit Rebate"],
          "aggregations": {"sum":{"Claim Quantity":"Claim Quantity"}}
        },
        "group02": {
          "cols": ["Partner Desc","Big Deal ID","Base SKU","Week End Date"],
          "aggregations": {"sum":{"Sum_Claim Quantity":"Claim Quantity"}}
        }
      }
    },
    "RAW_MASTER_CALENDAR": {
      "name": "raw_master_calendar",
      "filePath": "/home/avik/Scienaptic/RnD/data/.csv",
      "select": {
        "select01": {
          "isUnknown":"n",
          "cols": ["BU","SKU","Product","Rebate Amount","Promo Name","C2B Promo Code","Start Date","End Date","Season","Season_Ordered"]
        },
        "select02": {
          "isUnknown":"y",
          "cols":["Start Date","End Date","Start - Week End","Week End - End","Season Ordered","New End Date","Max_Week.End.Date","End Date Change"]
        }
      },
      "join": {
        "join01": {
          "leftTableAlias": "left", "rightTableAlias": "right", "typeOfJoin": ["inner"],
          "joinCriteria": {
            "left": ["Big Deal ID","Base SKU"], "right": ["C2B Promo Code","SKU"]
          },
          "selectCriteria": {
            "left": ["Week End Date","Partner Ship Calendar Date","Partner Desc","Big Deal ID","Base SKU","Claim Partner Unit Rebate","Sum_Claim Quantity"],
            "right": ["C2B Promo Code","Start Date","End Date"]
          }
        },
        "join02": {
          "leftTableAlias": "left", "rightTableAlias": "right", "typeOfJoin": ["inner"],
          "joinCriteria": {
            "left": ["Base SKU","C2B Promo Code"], "right": ["Base SKU","C2B Promo Code"]
          },
          "selectCriteria": {
            "left": ["Week End Date","Base SKU","Claim Partner Unit Rebate","C2B Promo Code","Sum_Sum_Claim Quantity"],
            "right": ["Avg_Sum_Sum_Claim Quantity"]
          }
        },
        "join03": {
          "leftTableAlias": "left", "rightTableAlias": "right", "typeOfJoin": ["left","inner"],
          "joinCriteria": {
            "left": ["SKU","C2B Promo Code"],
            "right": ["Base SKU","C2B Promo Code"]
          },
          "selectCriteria": {
            "left": [],
            "right": []
          }
        },
        "join04": {
          "leftTableAlias": "left", "rightTableAlias": "right", "typeOfJoin": ["left"],
          "joinCriteria": {
            "left": ["Big Deal ID"], "right": ["C2B Promo Code"]
          },
          "selectCriteria": {
            "left": [],
            "right": []
          }
        }
      },
      "filter": {
        "filter01": {
          "multiWordMap": { "out_promo_date": "Outside Promo Date"},
          "conditionTypes": ["and"],
          "conditions": ["out_promo_date = N"]
        },
        "filter02": {
          "multiWordMap": { "out_promo_date": "Outside Promo Date"},
          "conditionTypes": ["and"],
          "conditions": ["Outside Promo Date = Y"]
        },
        "filter03": {
          "multiWordMap": { "Include": "Include"},
          "conditionTypes": ["and"],
          "conditions": ["Include = Y"]
        }
      },
      "group" : {
        "group01": {
          "cols" : ["C2B Promo Code","SKU","Start Date","End Date"],
          "aggregations": {"sum" : {"dummy":"dummy"}}
        },
        "group02": {
          "cols": ["Base SKU","C2B Promo Code"],
          "aggregations": {"avg": {"Sum_Sum_Claim Quantity": "Avg_Sum_Sum_Claim Quantity"}}
        },
        "group03": {
          "cols": ["C2B Promo Code","Base SKU"],
          "aggregations": {"max": {"Week End Date": "Max_Week.End.Date"}}
        },
        "group04" :{
          "cols": ["C2B Promo Code"],
          "aggregations": {"sum": {"dummy": ""}}
        },
        "group05": {
          "cols": ["SKU","Week.End.Date","Option Type"],
          "aggregations": {"max": {"Rebate Amount": "IR"},
                           "first": {"C2B Promo Code":"First_C2B Promo Code"}}
        }
      },
      "sort" : {
        "sort01": {
          "asc": ["SKU","Week.End.Date"],
          "desc": ["Rebate Amount"]
        }
      },
      "rename" : {
        "rename01": {
          "C2B Promo Code": "First_C2B Promo Code"
        }
      }
    },
    "AUX_WEEK_END_DATE": {
      "name": "aux_week_end_date",
      "filePath": "/home/avik/Scienaptic/RnD/data/aux_week_end_date.csv",
      "select": {
        "select01": {
          "isUnknown":"n",
          "cols": ["fy_week","wed","season","season_ordered","cal_month","cal_year","fiscal_quarter","fiscal_year"]
        }
      },
      "join": {
        "join01": {
          "leftTableAlias": "left", "rightTableAlias": "right", "typeOfJoin": ["inner"],
          "joinCriteria": {
            "left": ["Week End Date"], "right": ["Week.End.Date"]
          },
          "selectCriteria": {
            "isUnknown":"y",
            "left": [], "right": []
          }
        }
      }
    },
    "AUX_SKU_HIERARCHY": {
      "name": "aux_sku_hierarchy",
      "filePath": "/home/avik/Scienaptic/RnD/data/aux_sku_hierarchy.csv"
    },
    "ST_ORCA" :{
      "name": "st_orca",
      "filePath": "/home/avik/Scienaptic/RnD/data/st_orca.csv",
      "select": {
        "select01": {
          "isUnknown": "y",
          "cols": ["Quarter","Month","Buyer Account Company OIID","Buyer Account Company Siebel Location ID","Flag Duplicate Sale","Seller Account Company"]
        }
      },
      "join":{
        "join01": {
          "leftTableAlias": "left", "rightTableAlias": "right", "typeOfJoin": ["left","inner"],
          "joinCriteria": {
            "left": ["Big Deal Nbr"], "right": ["C2B Promo Code"]
          },
          "selectCriteria": {
            "left": [], "right": []
          }
        },
        "join02": {
          "isUnknown": "y",
          "leftTableAlias": "left", "rightTableAlias": "right", "typeOfJoin": ["right","inner"],
          "joinCriteria": {
            "left": ["Week End Date","Product Base ID","Account Company"],
            "right": ["Week End Date","Product Base ID","Account Company"]
          },
          "selectCriteria": {
            "left": [], "right": ["Product Base ID","Product Base Desc","Account Company","Week End Date","Week"]
          }
        }
      },
      "group": {
        "group01": {
          "cols" : ["Big Deal Nbr","Account Company","Product Base ID"],
          "aggregations": {"sum" : {"Qty":"Sum_Qty"}}
        },
        "group02": {
          "cols" : ["Product Base ID","Product Base Desc","Account Company","Week End Date"],
          "aggregations": {"sum" : {"Qty":"Sum_Qty"}}
        },
        "group03":{
          "cols" : ["Product Base ID","Product Base Desc","Account Company","Week End Date"],
          "aggregations": {"sum" : {"Qty":"Sum_Qty"}}
        }
      },
      "filter": {
        "filter01":{
          "multiWordMap" : {"big_deal": "Big Deal"},
          "conditionTypes": ["and"],
          "conditions": ["Big Deal = 1"]
        }
      }
    },
    "STT_ORCA" :{
      "name": "stt_orca",
      "filePath": "/home/avik/Scienaptic/RnD/data/stt_orca.csv",
      "select": {
        "select01": {
          "isUnknown": "y",
          "cols": ["Quarter","Month","Flag Duplicate Sale","Big Deal Eclipse Customer ID"]
        }
      },
      "join":{
        "join01": {
          "leftTableAlias": "left", "rightTableAlias": "right", "typeOfJoin": ["left","inner"],
          "joinCriteria": {
            "left": ["Big Deal Nbr"], "right": ["C2B Promo Code"]
          },
          "selectCriteria": {
            "left": [], "right": []
          }
        }
      },
      "group": {
        "group01": {
          "cols" : ["SKU","Option Type"],
          "aggregations": {"sum" : {"dummy":"dummy"}}
        },
        "group02": {
          "cols" : ["Big Deal Nbr","Account Company","Product Base ID"],
          "aggregations": {"sum" : {"Qty":"Sum_Qty"}}
        }
      }
    }
  }
}